<!DOCTYPE html>
<html>
<head>
    <title>Miecie</title>
    <link rel="icon" type="image/x-icon" href="rat.ico">
</head>
<style>
    h1 {text-align: center;}
    p {text-align: center;}
    #slider-container {
        text-align: center;
        margin-top: 20px;
    }
</style>
<body>
    <h1>iykyk</h1>
    <p>idk what to put here</p>
    <p>Oh ik, actually</p>
    <p>Have a look at this cool spinning rat</p>
    <div style="text-align: center;"><img src="spinning_rat.gif"></div>

    <div id="sphere-container" style="
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 200px;
        height: 200px;
    "></div>

    <div style="text-align: center;"><h2>Masywna Kula</h2></div>
    <div id="slider-container">
        <label for="radius-slider">r:</label>
        <input type="range" id="radius-slider" min="1" max="5" value="1" step="0.1">
        <span id="radius-value">1</span>
    </div>

    <script type="module">
        import * as THREE from 'https://cdn.jsdelivr.net/npm/three@0.165.0/+esm';

        const container = document.getElementById('sphere-container');
        const scene = new THREE.Scene();

        const camera = new THREE.PerspectiveCamera(45, container.clientWidth / container.clientHeight, 0.1, 100);
        camera.position.z = 15;

        const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
        renderer.setSize(container.clientWidth, container.clientHeight);
        renderer.setPixelRatio(window.devicePixelRatio);
        container.appendChild(renderer.domElement);

        let radius = 1;
        const segments = 64;
        const sphereGeometry = new THREE.SphereGeometry(radius, segments, segments);

        const size = 64;
        const canvas = document.createElement('canvas');
        canvas.width = canvas.height = size;
        const ctx = canvas.getContext('2d');
        ctx.fillStyle = '#eeeeff';
        ctx.fillRect(0, 0, size, size);
        ctx.strokeStyle = '#cccccc';
        ctx.lineWidth = 1;
        for (let i = 0; i <= size; i += 16) {
            ctx.beginPath();
            ctx.moveTo(i, 0);
            ctx.lineTo(i, size);
            ctx.moveTo(0, i);
            ctx.lineTo(size, i);
            ctx.stroke();
        }
        const gridTexture = new THREE.CanvasTexture(canvas);
        gridTexture.wrapS = gridTexture.wrapT = THREE.RepeatWrapping;
        gridTexture.repeat.set(4, 4);

        const sphereMaterial = new THREE.MeshStandardMaterial({
            map: gridTexture,
            roughness: 0.3,
            metalness: 0.1
        });

        let sphere = new THREE.Mesh(sphereGeometry, sphereMaterial);
        scene.add(sphere);

        const light = new THREE.DirectionalLight(0xffffff, 1.5);
        light.position.set(-1, 1, 1);
        scene.add(light);
        scene.add(new THREE.AmbientLight(0xffffff, 0.4));

        function animate() {
            requestAnimationFrame(animate);
            sphere.rotation.y += 0.01;
            renderer.render(scene, camera);
        }
        animate();

        window.addEventListener('resize', () => {
            const w = container.clientWidth;
            const h = container.clientHeight;
            camera.aspect = w / h;
            camera.updateProjectionMatrix();
            renderer.setSize(w, h);
        });

        const slider = document.getElementById('radius-slider');
        const radiusValue = document.getElementById('radius-value');

        slider.addEventListener('input', (event) => {
            const newRadius = parseFloat(event.target.value);
            radiusValue.textContent = newRadius.toFixed(1);

            scene.remove(sphere);
            sphere.geometry.dispose();

            const newGeometry = new THREE.SphereGeometry(newRadius, segments, segments);
            sphere = new THREE.Mesh(newGeometry, sphereMaterial);
            scene.add(sphere);
        });
    </script>
</body>
</html>
